{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "Mouse Follower 1",
  "type": "registry:block",
  "description": "Image trail mouse follower using GSAP.",
  "dependencies": [],
  "files": [
    {
      "path": "registry/new-york/mouse-follower/mouse-follower1.tsx",
      "content": "\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport gsap from \"gsap\";\r\n\r\ninterface MousePos {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nconst Image = [\r\n  \"https://cdn.cosmos.so/9beb0a06-e008-4b95-a5b8-15c2d255a4c4?format=jpeg\",\r\n  \"https://cdn.cosmos.so/6a854a1b-5c06-45b1-b055-4a4652ba4e21?format=jpeg\",\r\n  \"https://cdn.cosmos.so/3c35a1b1-717b-4219-9282-881a762724f2?format=jpeg\",\r\n  \"https://cdn.cosmos.so/8a6998b4-fce7-48c4-b40c-9b90bcf0007c?format=jpeg\",\r\n  \"https://cdn.cosmos.so/f798acc8-6bc8-4f2c-ace2-2440f2be4795?format=jpeg\",\r\n  \"https://cdn.cosmos.so/39a80b7b-29fb-4079-a251-176df0fa15eb?format=jpeg\",\r\n  \"https://cdn.cosmos.so/dfa2ba1c-97b6-44ba-a68b-7c619c9d416b?format=jpeg\",\r\n  \"https://cdn.cosmos.so/97de8d7c-f9c0-4625-838f-3aaf8c286cdb?format=jpeg\",\r\n  \"https://cdn.cosmos.so/71e10d8f-c92d-4761-96ce-4b6cc9eedcbe?format=jpeg\",\r\n  \"https://cdn.cosmos.so/0cff1394-f353-4c9e-87f7-37c63d165bf9?format=jpeg\",\r\n  \"https://cdn.cosmos.so/15a7b84c-ba74-470f-8813-25eb0a0d8ba2?format=jpeg\",\r\n];\r\n\r\nconst MouseFollower1 = () => {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const flairRefs = useRef<(HTMLImageElement | null)[]>([]);\r\n  const mousePosRef = useRef<MousePos>({ x: 0, y: 0 });\r\n  const lastMousePosRef = useRef<MousePos>({ x: 0, y: 0 });\r\n  const cachedMousePosRef = useRef<MousePos>({ x: 0, y: 0 });\r\n  const indexRef = useRef(0);\r\n  const gapRef = useRef(100);\r\n  const isHoveringRef = useRef(false);\r\n  const boundsRef = useRef({ left: 0, right: 0, top: 0, bottom: 0 });\r\n\r\n  useEffect(() => {\r\n    const wrapper = gsap.utils.wrap(0, Image.length);\r\n\r\n    // Handle mouse movement\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      if (!containerRef.current) return;\r\n\r\n      mousePosRef.current = {\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n      };\r\n\r\n      // Check if mouse is within container bounds\r\n      const rect = containerRef.current.getBoundingClientRect();\r\n      boundsRef.current = {\r\n        left: rect.left,\r\n        right: rect.right,\r\n        top: rect.top,\r\n        bottom: rect.bottom,\r\n      };\r\n\r\n      const isInContainer =\r\n        e.clientX >= rect.left &&\r\n        e.clientX <= rect.right &&\r\n        e.clientY >= rect.top &&\r\n        e.clientY <= rect.bottom;\r\n\r\n      isHoveringRef.current = isInContainer;\r\n\r\n      // Hide all particles when outside container\r\n      if (!isInContainer) {\r\n        flairRefs.current.forEach((img) => {\r\n          if (img) img.style.opacity = \"0\";\r\n        });\r\n      }\r\n    };\r\n\r\n    // Animation timeline for each flair\r\n    const playAnimation = (shape: HTMLImageElement) => {\r\n      const tl = gsap.timeline();\r\n      tl.from(shape, {\r\n        opacity: 0,\r\n        scale: 0,\r\n        ease: \"elastic.out(1,0.3)\",\r\n      })\r\n        .to(\r\n          shape,\r\n          {\r\n            rotation: gsap.utils.random(-360, 360),\r\n          },\r\n          \"<\"\r\n        )\r\n        .to(\r\n          shape,\r\n          {\r\n            y: \"120vh\",\r\n            ease: \"back.in(0.4)\",\r\n            duration: 1,\r\n          },\r\n          0\r\n        );\r\n    };\r\n\r\n    // Animate image at current mouse position\r\n    const animateImage = () => {\r\n      // Only animate if hovering over container\r\n      if (!isHoveringRef.current) return;\r\n\r\n      const wrappedIndex = wrapper(indexRef.current);\r\n      const img = flairRefs.current[wrappedIndex];\r\n\r\n      if (!img) return;\r\n\r\n      gsap.killTweensOf(img);\r\n\r\n      gsap.set(img, {\r\n        clearProps: \"all\",\r\n      });\r\n\r\n      // Clamp position to container bounds\r\n      const bounds = boundsRef.current;\r\n      const clampedX = Math.max(\r\n        bounds.left,\r\n        Math.min(mousePosRef.current.x, bounds.right)\r\n      );\r\n      const clampedY = Math.max(\r\n        bounds.top,\r\n        Math.min(mousePosRef.current.y, bounds.bottom)\r\n      );\r\n\r\n      gsap.set(img, {\r\n        opacity: 1,\r\n        left: clampedX,\r\n        top: clampedY,\r\n        xPercent: -50,\r\n        yPercent: -50,\r\n      });\r\n\r\n      playAnimation(img);\r\n      indexRef.current++;\r\n    };\r\n\r\n    // Main ticker function\r\n    const imageTrail = () => {\r\n      const travelDistance = Math.hypot(\r\n        lastMousePosRef.current.x - mousePosRef.current.x,\r\n        lastMousePosRef.current.y - mousePosRef.current.y\r\n      );\r\n\r\n      // Interpolate mouse position for smoothness\r\n      cachedMousePosRef.current.x = gsap.utils.interpolate(\r\n        cachedMousePosRef.current.x || mousePosRef.current.x,\r\n        mousePosRef.current.x,\r\n        0.1\r\n      );\r\n      cachedMousePosRef.current.y = gsap.utils.interpolate(\r\n        cachedMousePosRef.current.y || mousePosRef.current.y,\r\n        mousePosRef.current.y,\r\n        0.1\r\n      );\r\n\r\n      if (travelDistance > gapRef.current) {\r\n        animateImage();\r\n        lastMousePosRef.current = { ...mousePosRef.current };\r\n      }\r\n    };\r\n\r\n    // Add event listener\r\n    window.addEventListener(\"mousemove\", handleMouseMove);\r\n\r\n    // Add ticker\r\n    gsap.ticker.add(imageTrail);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"mousemove\", handleMouseMove);\r\n      gsap.ticker.remove(imageTrail);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"overflow-hidden h-96 w-96 flex items-center justify-center \"\r\n    >\r\n      {/* Flair images container */}\r\n      <div className=\"fixed inset-0 pointer-events-none\">\r\n        {Image.concat(Image).map((img, i) => (\r\n          <img\r\n            key={i}\r\n            ref={(el) => {\r\n              if (el) flairRefs.current[i] = el;\r\n            }}\r\n            src={img}\r\n            alt=\"flair\"\r\n            className=\"fixed w-12 opacity-0\"\r\n            style={{\r\n              pointerEvents: \"none\",\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MouseFollower1;\r\n",
      "type": "registry:component",
      "target": "components/pixel-perfect/mouse-follower1.tsx"
    }
  ]
}