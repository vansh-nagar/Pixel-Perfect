{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "text-matrix-rain",
  "type": "registry:block",
  "description": "Columns of random symbols fall then lock into real text.",
  "dependencies": [
    "framer-motion"
  ],
  "files": [
    {
      "path": "registry/new-york/text/text-matrix-rain.tsx",
      "content": "\"use client\";\r\n\r\nimport { useRef } from \"react\";\r\nimport gsap from \"gsap\";\r\nimport { useGSAP } from \"@gsap/react\";\r\n\r\ninterface TextMatrixRainProps {\r\n  children: string;\r\n  className?: string;\r\n  duration?: number;\r\n  repeat?: boolean;\r\n}\r\n\r\nexport default function TextMatrixRain({\r\n  children,\r\n  className = \"\",\r\n  duration = 2,\r\n  repeat = true,\r\n}: TextMatrixRainProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const textRef = useRef<HTMLSpanElement>(null);\r\n\r\n  useGSAP(\r\n    () => {\r\n      const el = textRef.current!;\r\n      const finalText = children;\r\n      const matrixChars =\r\n        \"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン0123456789\";\r\n      const intervals: NodeJS.Timeout[] = [];\r\n\r\n      const runAnimation = () => {\r\n        const charStates = new Array(finalText.length).fill(false);\r\n        const charElements: HTMLSpanElement[] = [];\r\n\r\n        el.innerHTML = \"\";\r\n        finalText.split(\"\").forEach((char, i) => {\r\n          const span = document.createElement(\"span\");\r\n          span.style.display = \"inline-block\";\r\n          span.style.color = \"#00ff00\";\r\n          span.style.textShadow = \"0 0 10px #00ff00\";\r\n          span.textContent =\r\n            char === \" \"\r\n              ? \"\\u00A0\"\r\n              : matrixChars[Math.floor(Math.random() * matrixChars.length)];\r\n          el.appendChild(span);\r\n          charElements.push(span);\r\n        });\r\n\r\n        charElements.forEach((span, i) => {\r\n          if (finalText[i] === \" \") {\r\n            span.textContent = \"\\u00A0\";\r\n            return;\r\n          }\r\n\r\n          const lockDelay = i * 0.1 + Math.random() * 0.5;\r\n\r\n          const scrambleInterval = setInterval(() => {\r\n            if (!charStates[i]) {\r\n              span.textContent =\r\n                matrixChars[Math.floor(Math.random() * matrixChars.length)];\r\n            }\r\n          }, 50);\r\n          intervals.push(scrambleInterval);\r\n\r\n          gsap.delayedCall(lockDelay, () => {\r\n            clearInterval(scrambleInterval);\r\n            charStates[i] = true;\r\n\r\n            gsap.to(span, {\r\n              duration: 0.2,\r\n              color: \"#ffffff\",\r\n              textShadow: \"0 0 20px #00ff00, 0 0 40px #00ff00\",\r\n              onComplete: () => {\r\n                span.textContent = finalText[i];\r\n                gsap.to(span, {\r\n                  duration: 0.5,\r\n                  textShadow: \"0 0 0px transparent\",\r\n                  ease: \"power2.out\",\r\n                });\r\n              },\r\n            });\r\n          });\r\n        });\r\n      };\r\n\r\n      runAnimation();\r\n\r\n      let repeatInterval: NodeJS.Timeout | undefined;\r\n      if (repeat) {\r\n        repeatInterval = setInterval(() => {\r\n          intervals.forEach(clearInterval);\r\n          intervals.length = 0;\r\n          runAnimation();\r\n        }, (duration + 1) * 1000);\r\n      }\r\n\r\n      return () => {\r\n        if (repeatInterval) clearInterval(repeatInterval);\r\n        intervals.forEach(clearInterval);\r\n      };\r\n    },\r\n    { scope: containerRef, dependencies: [children, duration, repeat] }\r\n  );\r\n\r\n  return (\r\n    <div ref={containerRef} className={className}>\r\n      <span ref={textRef}>{children}</span>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/pixel-perfect/text-matrix-rain.tsx"
    }
  ]
}