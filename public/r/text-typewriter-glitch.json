{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "text-typewriter-glitch",
  "type": "registry:block",
  "description": "Types then deletes then types wrong then finally correct.",
  "dependencies": [
    "framer-motion"
  ],
  "files": [
    {
      "path": "registry/new-york/text/text-typewriter-glitch.tsx",
      "content": "\"use client\";\r\n\r\nimport { useRef } from \"react\";\r\nimport gsap from \"gsap\";\r\nimport { useGSAP } from \"@gsap/react\";\r\n\r\ninterface TextTypewriterGlitchProps {\r\n  children: string;\r\n  className?: string;\r\n  duration?: number;\r\n}\r\n\r\nexport default function TextTypewriterGlitch({\r\n  children,\r\n  className = \"\",\r\n  duration = 3,\r\n}: TextTypewriterGlitchProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const textRef = useRef<HTMLSpanElement>(null);\r\n\r\n  useGSAP(\r\n    () => {\r\n      const el = textRef.current!;\r\n      const finalText = children;\r\n      const wrongChars = \"!@#$%^&*()QWERTY\";\r\n\r\n      const runAnimation = () => {\r\n        let currentText = \"\";\r\n        let targetIndex = 0;\r\n\r\n        const typeChar = () => {\r\n          if (targetIndex >= finalText.length) {\r\n            el.textContent = finalText;\r\n            gsap.delayedCall(1, runAnimation);\r\n            return;\r\n          }\r\n\r\n          const targetChar = finalText[targetIndex];\r\n          const shouldGlitch = Math.random() > 0.6 && targetChar !== \" \";\r\n\r\n          if (shouldGlitch) {\r\n            const wrongChar =\r\n              wrongChars[Math.floor(Math.random() * wrongChars.length)];\r\n            currentText += wrongChar;\r\n            el.textContent = currentText + \"|\";\r\n\r\n            gsap.delayedCall(0.1 + Math.random() * 0.15, () => {\r\n              currentText = currentText.slice(0, -1);\r\n              el.textContent = currentText + \"|\";\r\n\r\n              gsap.delayedCall(0.08, () => {\r\n                if (Math.random() > 0.5) {\r\n                  const anotherWrong =\r\n                    wrongChars[Math.floor(Math.random() * wrongChars.length)];\r\n                  currentText += anotherWrong;\r\n                  el.textContent = currentText + \"|\";\r\n\r\n                  gsap.delayedCall(0.12, () => {\r\n                    currentText = currentText.slice(0, -1);\r\n                    el.textContent = currentText + \"|\";\r\n                    gsap.delayedCall(0.08, () => {\r\n                      currentText += targetChar;\r\n                      el.textContent = currentText + \"|\";\r\n                      targetIndex++;\r\n                      gsap.delayedCall(0.05 + Math.random() * 0.1, typeChar);\r\n                    });\r\n                  });\r\n                } else {\r\n                  currentText += targetChar;\r\n                  el.textContent = currentText + \"|\";\r\n                  targetIndex++;\r\n                  gsap.delayedCall(0.05 + Math.random() * 0.1, typeChar);\r\n                }\r\n              });\r\n            });\r\n          } else {\r\n            currentText += targetChar;\r\n            el.textContent = currentText + \"|\";\r\n            targetIndex++;\r\n            gsap.delayedCall(0.04 + Math.random() * 0.08, typeChar);\r\n          }\r\n        };\r\n\r\n        el.textContent = \"|\";\r\n        gsap.delayedCall(0.5, typeChar);\r\n      };\r\n\r\n      runAnimation();\r\n    },\r\n    { scope: containerRef, dependencies: [children, duration] }\r\n  );\r\n\r\n  return (\r\n    <div ref={containerRef} className={className}>\r\n      <span ref={textRef}></span>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/pixel-perfect/text-typewriter-glitch.tsx"
    }
  ]
}