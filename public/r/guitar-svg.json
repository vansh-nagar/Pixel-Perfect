{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "guitar-svg",
  "type": "registry:block",
  "description": "Guitar SVG path effect animation.",
  "dependencies": [
    "gsap",
    "@gsap/react"
  ],
  "files": [
    {
      "path": "registry/new-york/svg-path-effects/guitar.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useRef, useCallback } from \"react\";\r\nimport gsap from \"gsap\";\r\nimport { useGSAP } from \"@gsap/react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Navbar } from \"@/components/mine/landing-page/navbar\";\r\n\r\nconst STRING_FREQUENCIES = [82.41, 110.0, 146.83, 196.0, 246.94, 329.63];\r\n\r\nconst STRING_COLORS = [\r\n  { start: \"rgb(139, 90, 43)\", end: \"rgb(205, 133, 63)\" },\r\n  { start: \"rgb(160, 100, 50)\", end: \"rgb(218, 165, 92)\" },\r\n  { start: \"rgb(180, 120, 60)\", end: \"rgb(230, 190, 110)\" },\r\n  { start: \"rgb(192, 192, 192)\", end: \"rgb(255, 255, 255)\" },\r\n  { start: \"rgb(200, 200, 200)\", end: \"rgb(255, 255, 255)\" },\r\n  { start: \"rgb(210, 210, 210)\", end: \"rgb(255, 255, 255)\" },\r\n];\r\n\r\nconst STRING_WIDTHS = [4, 3.5, 3, 2.5, 2, 1.5];\r\n\r\ninterface GuitarStringProps {\r\n  index: number;\r\n  yPosition: number;\r\n  frequency: number;\r\n  color: { start: string; end: string };\r\n  strokeWidth: number;\r\n}\r\n\r\nconst GuitarString = ({\r\n  index,\r\n  yPosition,\r\n  frequency,\r\n  color,\r\n  strokeWidth,\r\n}: GuitarStringProps) => {\r\n  const pathRef = useRef<SVGPathElement>(null);\r\n  const hitRef = useRef<SVGPathElement>(null);\r\n  const containerRef = useRef<SVGGElement>(null);\r\n\r\n  const startY = yPosition;\r\n  const p0 = useRef({ x: 0, y: startY });\r\n  const p1 = useRef({ x: 400, y: startY });\r\n  const p2 = useRef({ x: 800, y: startY });\r\n  const connected = useRef(false);\r\n  const hasPlayed = useRef(false);\r\n  const audioContext = useRef<AudioContext | null>(null);\r\n\r\n  const curveString = useCallback(() => {\r\n    return `M${p0.current.x},${p0.current.y} Q${p1.current.x},${p1.current.y} ${p2.current.x},${p2.current.y}`;\r\n  }, []);\r\n\r\n  const playSound = useCallback(() => {\r\n    if (!audioContext.current) {\r\n      audioContext.current = new AudioContext();\r\n    }\r\n\r\n    const ctx = audioContext.current;\r\n    const now = ctx.currentTime;\r\n\r\n    const masterGain = ctx.createGain();\r\n    masterGain.connect(ctx.destination);\r\n    masterGain.gain.setValueAtTime(0.4, now);\r\n\r\n    const bodyResonance = ctx.createBiquadFilter();\r\n    bodyResonance.type = \"peaking\";\r\n    bodyResonance.frequency.setValueAtTime(100, now);\r\n    bodyResonance.Q.setValueAtTime(2, now);\r\n    bodyResonance.gain.setValueAtTime(3, now);\r\n    bodyResonance.connect(masterGain);\r\n\r\n    const lowpass = ctx.createBiquadFilter();\r\n    lowpass.type = \"lowpass\";\r\n    lowpass.frequency.setValueAtTime(frequency < 150 ? 2000 : 4000, now);\r\n    lowpass.Q.setValueAtTime(1, now);\r\n    lowpass.connect(bodyResonance);\r\n\r\n    const highpass = ctx.createBiquadFilter();\r\n    highpass.type = \"highpass\";\r\n    highpass.frequency.setValueAtTime(80, now);\r\n    highpass.Q.setValueAtTime(0.5, now);\r\n    highpass.connect(lowpass);\r\n\r\n    const harmonics = [\r\n      { ratio: 1, gain: 1.0, decay: 3.5 },\r\n      { ratio: 2, gain: 0.5, decay: 2.5 },\r\n      { ratio: 3, gain: 0.35, decay: 2.0 },\r\n      { ratio: 4, gain: 0.25, decay: 1.5 },\r\n      { ratio: 5, gain: 0.15, decay: 1.2 },\r\n      { ratio: 6, gain: 0.1, decay: 1.0 },\r\n      { ratio: 7, gain: 0.05, decay: 0.8 },\r\n    ];\r\n\r\n    harmonics.forEach(({ ratio, gain, decay }) => {\r\n      const osc = ctx.createOscillator();\r\n      const oscGain = ctx.createGain();\r\n\r\n      const harmonicFreq = frequency * ratio;\r\n      if (harmonicFreq > 10000) return;\r\n\r\n      osc.type = ratio === 1 ? \"triangle\" : \"sine\";\r\n      osc.frequency.setValueAtTime(harmonicFreq, now);\r\n\r\n      const detune = (Math.random() - 0.5) * 4;\r\n      osc.detune.setValueAtTime(detune, now);\r\n\r\n      const attackTime = 0.002;\r\n      const peakGain = gain * 0.15;\r\n\r\n      oscGain.gain.setValueAtTime(0, now);\r\n      oscGain.gain.linearRampToValueAtTime(peakGain, now + attackTime);\r\n      oscGain.gain.setValueAtTime(peakGain * 0.8, now + attackTime + 0.01);\r\n      oscGain.gain.exponentialRampToValueAtTime(0.0001, now + decay);\r\n\r\n      osc.connect(oscGain);\r\n      oscGain.connect(highpass);\r\n\r\n      osc.start(now);\r\n      osc.stop(now + decay + 0.1);\r\n    });\r\n\r\n    const noiseBuffer = ctx.createBuffer(\r\n      1,\r\n      ctx.sampleRate * 0.05,\r\n      ctx.sampleRate\r\n    );\r\n    const noiseData = noiseBuffer.getChannelData(0);\r\n    for (let i = 0; i < noiseData.length; i++) {\r\n      noiseData[i] = (Math.random() * 2 - 1) * 0.3;\r\n    }\r\n\r\n    const noiseSource = ctx.createBufferSource();\r\n    noiseSource.buffer = noiseBuffer;\r\n\r\n    const noiseFilter = ctx.createBiquadFilter();\r\n    noiseFilter.type = \"bandpass\";\r\n    noiseFilter.frequency.setValueAtTime(frequency * 2, now);\r\n    noiseFilter.Q.setValueAtTime(5, now);\r\n\r\n    const noiseGain = ctx.createGain();\r\n    noiseGain.gain.setValueAtTime(0.08, now);\r\n    noiseGain.gain.exponentialRampToValueAtTime(0.0001, now + 0.05);\r\n\r\n    noiseSource.connect(noiseFilter);\r\n    noiseFilter.connect(noiseGain);\r\n    noiseGain.connect(masterGain);\r\n\r\n    noiseSource.start(now);\r\n    noiseSource.stop(now + 0.05);\r\n  }, [frequency]);\r\n\r\n  const render = useCallback(() => {\r\n    if (pathRef.current) {\r\n      pathRef.current.setAttribute(\"d\", curveString());\r\n    }\r\n    if (hitRef.current) {\r\n      hitRef.current.setAttribute(\"d\", curveString());\r\n    }\r\n  }, [curveString]);\r\n\r\n  useGSAP(\r\n    () => {\r\n      gsap.ticker.add(render);\r\n\r\n      const container = containerRef.current;\r\n      const hit = hitRef.current;\r\n\r\n      const handlePointerMove = (e: PointerEvent) => {\r\n        if (!container) return;\r\n        const svg = container.ownerSVGElement;\r\n        if (!svg) return;\r\n\r\n        const rect = svg.getBoundingClientRect();\r\n        const y = (e.clientY - rect.top) * (500 / rect.height);\r\n\r\n        const overPath = e.target === hit;\r\n        const distanceFromString = Math.abs(y - startY);\r\n\r\n        if (!connected.current && overPath) {\r\n          connected.current = true;\r\n          hasPlayed.current = false;\r\n          gsap.killTweensOf(p1.current);\r\n        }\r\n\r\n        if (connected.current) {\r\n          p1.current.y = y * 2 - (p0.current.y + p2.current.y) / 2;\r\n\r\n          if (distanceFromString > 25 && !hasPlayed.current) {\r\n            const displacement = Math.abs(p1.current.y - startY);\r\n            if (displacement > 15) {\r\n              playSound();\r\n              hasPlayed.current = true;\r\n            }\r\n            connected.current = false;\r\n            gsap.to(p1.current, {\r\n              duration: 1.2,\r\n              y: startY,\r\n              ease: \"elastic.out(1.2, 0.25)\",\r\n            });\r\n          }\r\n        }\r\n      };\r\n\r\n      const handlePointerLeave = () => {\r\n        if (connected.current && !hasPlayed.current) {\r\n          const displacement = Math.abs(p1.current.y - startY);\r\n          if (displacement > 15) {\r\n            playSound();\r\n            hasPlayed.current = true;\r\n          }\r\n        }\r\n\r\n        connected.current = false;\r\n        gsap.to(p1.current, {\r\n          duration: 1.2,\r\n          y: startY,\r\n          ease: \"elastic.out(1.2, 0.25)\",\r\n        });\r\n      };\r\n\r\n      container?.addEventListener(\"pointermove\", handlePointerMove);\r\n      container?.addEventListener(\"pointerleave\", handlePointerLeave);\r\n\r\n      render();\r\n\r\n      return () => {\r\n        gsap.ticker.remove(render);\r\n        container?.removeEventListener(\"pointermove\", handlePointerMove);\r\n        container?.removeEventListener(\"pointerleave\", handlePointerLeave);\r\n      };\r\n    },\r\n    { scope: containerRef }\r\n  );\r\n\r\n  return (\r\n    <g ref={containerRef}>\r\n      <Navbar />\r\n      <defs>\r\n        <linearGradient\r\n          id={`grad-${index}`}\r\n          x1=\"0\"\r\n          y1=\"0\"\r\n          x2=\"800\"\r\n          y2=\"0\"\r\n          gradientUnits=\"userSpaceOnUse\"\r\n        >\r\n          <stop offset=\"0\" stopColor={color.start} />\r\n          <stop offset=\"0.5\" stopColor={color.end} />\r\n          <stop offset=\"1\" stopColor={color.start} />\r\n        </linearGradient>\r\n      </defs>\r\n      <path\r\n        ref={pathRef}\r\n        d={`M0,${yPosition} Q400,${yPosition} 800,${yPosition}`}\r\n        stroke={`url(#grad-${index})`}\r\n        strokeWidth={strokeWidth}\r\n        fill=\"none\"\r\n        style={{ filter: \"drop-shadow(0 0 2px rgba(255,255,255,0.3))\" }}\r\n      />\r\n      <path\r\n        ref={hitRef}\r\n        d={`M0,${yPosition} Q400,${yPosition} 800,${yPosition}`}\r\n        stroke=\"transparent\"\r\n        strokeWidth=\"40\"\r\n        fill=\"none\"\r\n      />\r\n    </g>\r\n  );\r\n};\r\n\r\nconst Guitar = () => {\r\n  const svgRef = useRef<SVGSVGElement>(null);\r\n\r\n  const stringSpacing = 60;\r\n  const startYOffset = 100;\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen w-full p-8\">\r\n      <div className=\"relative w-full max-w-4xl\">\r\n        <div\r\n          className=\"absolute left-0 top-1/2 -translate-y-1/2 w-10 h-[450px] z-10 rounded-l-md\"\r\n          style={{\r\n            background: \"linear-gradient(to right, #2a1810, #4a2c1c, #3d2316)\",\r\n            boxShadow:\r\n              \"inset -2px 0 4px rgba(0,0,0,0.5), 2px 0 8px rgba(0,0,0,0.3)\",\r\n          }}\r\n        >\r\n          <div className=\"absolute right-0 top-0 w-1 h-full\" />\r\n        </div>\r\n        <div\r\n          className=\"absolute right-0 top-1/2 -translate-y-1/2 w-10 h-[450px] z-10 rounded-r-md\"\r\n          style={{\r\n            background: \"linear-gradient(to left, #2a1810, #4a2c1c, #3d2316)\",\r\n            boxShadow:\r\n              \"inset 2px 0 4px rgba(0,0,0,0.5), -2px 0 8px rgba(0,0,0,0.3)\",\r\n          }}\r\n        >\r\n          <div className=\"absolute left-0 top-0 w-1 h-full bg-gradient-to-b from-amber-200/20 via-amber-100/10 to-amber-200/20\" />\r\n        </div>\r\n\r\n        <svg\r\n          ref={svgRef}\r\n          viewBox=\"0 0 800 500\"\r\n          className=\"w-full rounded-lg overflow-hidden\"\r\n        >\r\n          <defs>\r\n            <linearGradient id=\"fretboardGrad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n              <stop offset=\"0%\" stopColor=\"#1a0f0a\" />\r\n              <stop offset=\"50%\" stopColor=\"#2d1f15\" />\r\n              <stop offset=\"100%\" stopColor=\"#1a0f0a\" />\r\n            </linearGradient>\r\n            <linearGradient id=\"woodGrain\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\">\r\n              <stop offset=\"0%\" stopColor=\"rgba(60, 40, 25, 0.3)\" />\r\n              <stop offset=\"25%\" stopColor=\"rgba(80, 50, 30, 0.1)\" />\r\n              <stop offset=\"50%\" stopColor=\"rgba(60, 40, 25, 0.3)\" />\r\n              <stop offset=\"75%\" stopColor=\"rgba(80, 50, 30, 0.1)\" />\r\n              <stop offset=\"100%\" stopColor=\"rgba(60, 40, 25, 0.3)\" />\r\n            </linearGradient>\r\n            <pattern\r\n              id=\"woodPattern\"\r\n              patternUnits=\"userSpaceOnUse\"\r\n              width=\"100\"\r\n              height=\"500\"\r\n            >\r\n              <rect width=\"100\" height=\"500\" fill=\"url(#fretboardGrad)\" />\r\n              <rect width=\"100\" height=\"500\" fill=\"url(#woodGrain)\" />\r\n            </pattern>\r\n          </defs>\r\n\r\n          <rect x=\"0\" y=\"0\" width=\"800\" height=\"500\" fill=\"url(#woodPattern)\" />\r\n\r\n          <rect x=\"0\" y=\"0\" width=\"800\" height=\"500\" fill=\"rgba(0,0,0,0.2)\" />\r\n\r\n          {[200, 400, 600].map((x) => (\r\n            <g key={x}>\r\n              <rect\r\n                x={x - 4}\r\n                y=\"60\"\r\n                width=\"8\"\r\n                height=\"380\"\r\n                fill=\"linear-gradient(to right, #8B7355, #C4A77D, #8B7355)\"\r\n                style={{\r\n                  filter: \"drop-shadow(0 0 2px rgba(0,0,0,0.5))\",\r\n                }}\r\n              />\r\n              <rect\r\n                x={x - 4}\r\n                y=\"60\"\r\n                width=\"8\"\r\n                height=\"380\"\r\n                fill=\"#C4A77D\"\r\n                opacity=\"0.9\"\r\n              />\r\n              <rect\r\n                x={x - 1}\r\n                y=\"60\"\r\n                width=\"2\"\r\n                height=\"380\"\r\n                fill=\"#D4B78F\"\r\n                opacity=\"0.5\"\r\n              />\r\n            </g>\r\n          ))}\r\n\r\n          {[300, 500, 700].map((x) => (\r\n            <circle\r\n              key={x}\r\n              cx={x}\r\n              cy=\"250\"\r\n              r=\"8\"\r\n              fill=\"#E8DCC8\"\r\n              opacity=\"0.4\"\r\n              style={{ filter: \"blur(0.5px)\" }}\r\n            />\r\n          ))}\r\n\r\n          <rect\r\n            x=\"0\"\r\n            y=\"55\"\r\n            width=\"800\"\r\n            height=\"4\"\r\n            fill=\"#4a3728\"\r\n            opacity=\"0.8\"\r\n          />\r\n          <rect\r\n            x=\"0\"\r\n            y=\"441\"\r\n            width=\"800\"\r\n            height=\"4\"\r\n            fill=\"#4a3728\"\r\n            opacity=\"0.8\"\r\n          />\r\n\r\n          {STRING_FREQUENCIES.map((freq, i) => (\r\n            <GuitarString\r\n              key={i}\r\n              index={i}\r\n              yPosition={startYOffset + i * stringSpacing}\r\n              frequency={freq}\r\n              color={STRING_COLORS[i]}\r\n              strokeWidth={STRING_WIDTHS[i]}\r\n            />\r\n          ))}\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Guitar;\r\n",
      "type": "registry:component",
      "target": "components/pixel-perfect/guitar.tsx"
    }
  ]
}