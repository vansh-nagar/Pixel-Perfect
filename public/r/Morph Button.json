{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "Morph Button",
  "type": "registry:block",
  "description": "A button that morphs its shape on hover using GSAP.",
  "dependencies": [
    "button"
  ],
  "files": [
    {
      "path": "registry/new-york/buttons/morph-button.tsx",
      "content": "\"use client\";\r\nimport React, { useRef, useEffect, useState } from \"react\";\r\nimport { gsap } from \"gsap\";\r\nimport { cn } from \"@/lib/cn\";\r\nimport { useGSAP } from \"@gsap/react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport MorphSVGPlugin from \"gsap/MorphSVGPlugin\";\r\n\r\ngsap.registerPlugin(MorphSVGPlugin);\r\n\r\ntype ButtonVariant =\r\n  | \"default\"\r\n  | \"destructive\"\r\n  | \"outline\"\r\n  | \"secondary\"\r\n  | \"ghost\"\r\n  | \"link\";\r\n\r\ntype ButtonSize = \"default\" | \"sm\" | \"lg\" | \"icon\" | \"icon-sm\" | \"icon-lg\";\r\n\r\ninterface MorphButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: ButtonVariant;\r\n  size?: ButtonSize;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nconst MorphButton = React.forwardRef<HTMLButtonElement, MorphButtonProps>(\r\n  (\r\n    {\r\n      className,\r\n      variant = \"outline\",\r\n      size = \"default\",\r\n      disabled = false,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const buttonRef = useRef<HTMLButtonElement>(null);\r\n    const [isDark, setIsDark] = useState(false);\r\n\r\n    useEffect(() => {\r\n      const isDarkTheme =\r\n        document.documentElement.classList.contains(\"dark\") ||\r\n        window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n      setIsDark(isDarkTheme);\r\n\r\n      const observer = new MutationObserver(() => {\r\n        const isDark = document.documentElement.classList.contains(\"dark\");\r\n        setIsDark(isDark);\r\n      });\r\n\r\n      observer.observe(document.documentElement, {\r\n        attributes: true,\r\n        attributeFilter: [\"class\"],\r\n      });\r\n\r\n      return () => observer.disconnect();\r\n    }, []);\r\n\r\n    useGSAP(\r\n      () => {\r\n        const start = \"M 0 100 V 50 Q 50 0 100 50 V 100 z\";\r\n        const end = \"M 0 100 V 0 Q 50 0 100 0 V 100 z\";\r\n        const tl = gsap.timeline({ paused: true });\r\n\r\n        tl.to(\".path\", {\r\n          morphSVG: start,\r\n          ease: \"power2.in\",\r\n        }).to(\".path\", {\r\n          morphSVG: end,\r\n          ease: \"power2.out\",\r\n        });\r\n\r\n        const tl2 = gsap.timeline({ paused: true });\r\n        const fromColor = isDark ? \"#ffffff\" : \"#000000\";\r\n        const toColor = isDark ? \"#000000\" : \"#ffffff\";\r\n\r\n        tl2.from(\".text\", { color: fromColor, scale: 1 }).to(\".text\", {\r\n          color: toColor,\r\n          duration: 0.5,\r\n          scale: 1.02,\r\n          ease: \"power2.inOut\",\r\n        });\r\n        if (!buttonRef.current) return;\r\n\r\n        buttonRef.current.addEventListener(\"mouseenter\", () => {\r\n          tl.play();\r\n          tl2.play();\r\n        });\r\n        buttonRef.current.addEventListener(\"mouseleave\", () => {\r\n          tl.reverse();\r\n          tl2.reverse();\r\n        });\r\n      },\r\n      { scope: buttonRef, dependencies: [isDark] }\r\n    );\r\n\r\n    const pathFill = isDark ? \"#ffffff\" : \"#000000\";\r\n\r\n    return (\r\n      <Button\r\n        ref={buttonRef}\r\n        variant={variant}\r\n        size={size}\r\n        disabled={disabled}\r\n        className={cn(\r\n          \"relative button cursor-pointer overflow-hidden\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <div className=\"absolute inset-0\">\r\n          <svg\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n            }}\r\n            viewBox=\"0 0 100 100\"\r\n            preserveAspectRatio=\"none\"\r\n            className=\"transition\"\r\n          >\r\n            <path\r\n              className=\"path\"\r\n              fill={pathFill}\r\n              strokeWidth=\"0px\"\r\n              vectorEffect=\"non-scaling-stroke\"\r\n              d=\"M 0 100 V 100 Q 50 100 100 100 V 100 z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        <span className=\"z-40 scale-100 text\">{children}</span>\r\n      </Button>\r\n    );\r\n  }\r\n);\r\n\r\n\r\nexport default MorphButton;\r\n",
      "type": "registry:component",
      "target": "components/pixel-perfect/morph-button.tsx"
    }
  ]
}