{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "Mouse Follower 2",
  "type": "registry:block",
  "description": "Mouse follower image trail with pure DOM.",
  "dependencies": [],
  "files": [
    {
      "path": "registry/new-york/mouse-follower/mouse-follower2.tsx",
      "content": "\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\n\r\nconst MouseFollower2 = () => {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const trailRef = useRef<any[]>([]);\r\n  const stateRef = useRef({\r\n    mouseX: 0,\r\n    mouseY: 0,\r\n    lastMouseX: 0,\r\n    lastMouseY: 0,\r\n    prevMouseX: 0,\r\n    prevMouseY: 0,\r\n  });\r\n\r\n  const images = [\r\n    \"https://cdn.cosmos.so/9beb0a06-e008-4b95-a5b8-15c2d255a4c4?format=jpeg\",\r\n    \"https://cdn.cosmos.so/6a854a1b-5c06-45b1-b055-4a4652ba4e21?format=jpeg\",\r\n    \"https://cdn.cosmos.so/3c35a1b1-717b-4219-9282-881a762724f2?format=jpeg\",\r\n    \"https://cdn.cosmos.so/8a6998b4-fce7-48c4-b40c-9b90bcf0007c?format=jpeg\",\r\n    \"https://cdn.cosmos.so/f798acc8-6bc8-4f2c-ace2-2440f2be4795?format=jpeg\",\r\n    \"https://cdn.cosmos.so/39a80b7b-29fb-4079-a251-176df0fa15eb?format=jpeg\",\r\n    \"https://cdn.cosmos.so/dfa2ba1c-97b6-44ba-a68b-7c619c9d416b?format=jpeg\",\r\n    \"https://cdn.cosmos.so/97de8d7c-f9c0-4625-838f-3aaf8c286cdb?format=jpeg\",\r\n    \"https://cdn.cosmos.so/71e10d8f-c92d-4761-96ce-4b6cc9eedcbe?format=jpeg\",\r\n    \"https://cdn.cosmos.so/0cff1394-f353-4c9e-87f7-37c63d165bf9?format=jpeg\",\r\n    \"https://cdn.cosmos.so/15a7b84c-ba74-470f-8813-25eb0a0d8ba2?format=jpeg\",\r\n  ];\r\n\r\n  const config = {\r\n    imageLifespan: 600,\r\n    removalDelay: 16,\r\n    mouseThreshold: 40,\r\n    inDuration: 600,\r\n    outDuration: 800,\r\n    inEasing: \"cubic-bezier(.07,.5,.5,1)\",\r\n    outEasing: \"cubic-bezier(.87, 0, .13, 1)\",\r\n    baseImageSize: 120,\r\n    minImageSize: 60,\r\n    maxImageSize: 120,\r\n    baseRotation: 30,\r\n    maxRotationFactor: 3,\r\n  };\r\n\r\n  const createImage = () => {\r\n    if (!containerRef.current) return;\r\n    const imageIndex = Math.floor(Math.random() * images.length);\r\n    const imageSrc = images[imageIndex];\r\n    const size =\r\n      Math.random() * (config.maxImageSize - config.minImageSize) +\r\n      config.minImageSize;\r\n\r\n    const img = document.createElement(\"img\");\r\n    img.className = \"trail-img\";\r\n    img.src = imageSrc;\r\n    img.width = img.height = size;\r\n\r\n    const rect = containerRef.current.getBoundingClientRect();\r\n    const x = stateRef.current.mouseX - rect.left;\r\n    const y = stateRef.current.mouseY - rect.top;\r\n\r\n    const rot = (Math.random() - 0.5) * config.baseRotation;\r\n    img.style.left = `${x}px`;\r\n    img.style.top = `${y}px`;\r\n    img.style.transform = `translate(-50%, -50%) rotate(${rot}deg) scale(0)`;\r\n    img.style.transition = `transform ${config.inDuration}ms ${config.inEasing}`;\r\n\r\n    containerRef.current.appendChild(img);\r\n\r\n    setTimeout(() => {\r\n      img.style.transform = `translate(-50%, -50%) rotate(${rot}deg) scale(1)`;\r\n    }, 10);\r\n\r\n    trailRef.current.push({\r\n      element: img,\r\n      rotation: rot,\r\n      removeTime: Date.now() + config.imageLifespan,\r\n    });\r\n  };\r\n\r\n  const removeOldImages = () => {\r\n    const now = Date.now();\r\n    if (!trailRef.current.length) return;\r\n\r\n    while (trailRef.current.length && now >= trailRef.current[0].removeTime) {\r\n      const imgObj = trailRef.current.shift();\r\n\r\n      // Unique vortex implosion effect\r\n      const randomX = (Math.random() - 0.5) * 100;\r\n      const randomY = (Math.random() - 0.5) * 100;\r\n      const randomRotation = Math.random() * 720 - 360;\r\n      const randomSkew = (Math.random() - 0.5) * 30;\r\n\r\n      imgObj.element.style.transition = `all ${config.outDuration}ms cubic-bezier(0.36, 0, 0.66, -0.56)`;\r\n      imgObj.element.style.opacity = \"0\";\r\n      imgObj.element.style.transform = `\r\n        translate(calc(-50% + ${randomX}px), calc(-50% + ${randomY}px))\r\n        rotate(${randomRotation}deg)\r\n        skewX(${randomSkew}deg)\r\n        scale(0.3)\r\n        blur(20px)\r\n      `;\r\n\r\n      setTimeout(() => imgObj.element.remove(), config.outDuration);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const state = stateRef.current;\r\n      state.prevMouseX = state.mouseX;\r\n      state.prevMouseY = state.mouseY;\r\n      state.mouseX = e.clientX;\r\n      state.mouseY = e.clientY;\r\n\r\n      if (!containerRef.current) return;\r\n      const rect = containerRef.current.getBoundingClientRect();\r\n      const isInContainer =\r\n        e.clientX >= rect.left &&\r\n        e.clientX <= rect.right &&\r\n        e.clientY >= rect.top &&\r\n        e.clientY <= rect.bottom;\r\n\r\n      if (isInContainer) {\r\n        const dx = state.mouseX - state.lastMouseX;\r\n        const dy = state.mouseY - state.lastMouseY;\r\n        if (Math.hypot(dx, dy) > config.mouseThreshold) {\r\n          createImage();\r\n          state.lastMouseX = state.mouseX;\r\n          state.lastMouseY = state.mouseY;\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousemove\", handleMouseMove);\r\n\r\n    const animationLoop = setInterval(() => {\r\n      removeOldImages();\r\n    }, config.removalDelay);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousemove\", handleMouseMove);\r\n      clearInterval(animationLoop);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <style>{`\r\n        .trail-img {\r\n          position: absolute;\r\n          pointer-events: none;\r\n          will-change: transform;\r\n          z-index: 12;\r\n        }\r\n      `}</style>\r\n\r\n      <div className=\"h-96 w-96\" ref={containerRef}></div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MouseFollower2;\r\n",
      "type": "registry:component",
      "target": "components/pixel-perfect/mouse-follower2.tsx"
    }
  ]
}